<div
  class="p-4 border border-aluminium rounded space-y-4"
  (drop)="onDrop($event)"
  (dragover)="$event.preventDefault()"
>
  <div
    role="radiogroup"
    aria-label="Tipo"
    class="flex border border-aluminium rounded overflow-hidden"
  >
    <label
      class="px-2 py-1 cursor-pointer focus-within:ring-2 focus-within:ring-hydro-light-blue"
      [class.bg-hydro-blue]="type === 'ANNOTATION'"
      [class.text-white]="type === 'ANNOTATION'"
    >
      <input
        class="sr-only"
        type="radio"
        name="type"
        [(ngModel)]="type"
        value="ANNOTATION"
        (ngModelChange)="saveDraft()"
      />
      AnotaÃ§Ã£o
    </label>
    <label
      class="px-2 py-1 cursor-pointer focus-within:ring-2 focus-within:ring-hydro-light-blue"
      [class.bg-hydro-blue]="type === 'URGENCY'"
      [class.text-white]="type === 'URGENCY'"
    >
      <input
        class="sr-only"
        type="radio"
        name="type"
        [(ngModel)]="type"
        value="URGENCY"
        (ngModelChange)="saveDraft()"
      />
      UrgÃªncia
    </label>
    <label
      class="px-2 py-1 cursor-pointer focus-within:ring-2 focus-within:ring-hydro-light-blue"
      [class.bg-hydro-blue]="type === 'PENDENCY'"
      [class.text-white]="type === 'PENDENCY'"
    >
      <input
        class="sr-only"
        type="radio"
        name="type"
        [(ngModel)]="type"
        value="PENDENCY"
        (ngModelChange)="saveDraft()"
      />
      PendÃªncia
    </label>
  </div>

  <div class="border rounded">
    <div class="flex gap-1 border-b p-1">
      <button type="button" (click)="format('bold')" aria-label="Negrito" class="px-2 py-1 hover:bg-light-gray">B</button>
      <button type="button" (click)="format('italic')" aria-label="ItÃ¡lico" class="px-2 py-1 hover:bg-light-gray"><em>I</em></button>
      <button type="button" (click)="format('insertUnorderedList')" aria-label="Lista" class="px-2 py-1 hover:bg-light-gray">â€¢</button>
      <button type="button" (click)="format('insertOrderedList')" aria-label="Lista numerada" class="px-2 py-1 hover:bg-light-gray">1.</button>
      <button type="button" (click)="formatLink()" aria-label="Link" class="px-2 py-1 hover:bg-light-gray">ðŸ”—</button>
    </div>
    <div
      #editor
      class="editor p-2 min-h-[120px] outline-none"
      contenteditable="true"
      role="textbox"
      aria-label="ConteÃºdo"
      data-placeholder="Escreva uma atualizaÃ§Ã£o do turno..."
      (input)="saveDraft()"
      (paste)="onPaste($event)"
    ></div>
  </div>

  <div *ngIf="attachments.length" class="space-y-2">
    <div *ngFor="let att of attachments" class="flex items-center gap-2">
      <img *ngIf="att.url" [src]="att.url" alt="PrÃ©-visualizaÃ§Ã£o" class="w-16 h-16 object-cover rounded" />
      <span class="text-sm">{{ att.file.name }} ({{ att.file.size / 1024 | number:'1.0-0' }} KB)</span>
      <button type="button" (click)="removeAttachment(att)" class="text-bauxite text-sm">Remover</button>
    </div>
  </div>

  <div class="flex items-center gap-4">
    <label class="cursor-pointer text-hydro-blue flex items-center gap-1">
      <input type="file" multiple class="hidden" (change)="onFileInput($event)" />
      <span>Anexar arquivos</span>
    </label>
    <button
      type="button"
      (click)="publish()"
      [disabled]="sending"
      class="px-4 py-2 rounded bg-hydro-blue hover:bg-hydro-light-blue text-white disabled:opacity-50"
    >
      {{ sending ? 'Publicandoâ€¦' : 'Publicar' }}
    </button>
    <span *ngIf="message" class="text-sm" [class.text-bauxite]="message.startsWith('Falha')" [class.text-green]="message.startsWith('PublicaÃ§Ã£o')" >{{ message }}</span>
  </div>
</div>
