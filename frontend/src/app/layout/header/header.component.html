<header class="sticky top-0 z-10 bg-white border-b border-light-gray" role="banner">
  <div class="max-w-[70rem] mx-auto px-2 sm:px-4 lg:px-6 py-2 flex flex-wrap items-center gap-2">
    <!-- Logos -->
    <img
      src="assets/brand/hydro/logos/primary/hydro-logo-vertical-blue.png"
      alt="Hydro"
      class="h-16 w-auto hidden sm:block"
    />
    <img
      src="assets/brand/hydro/logos/secondary/hydro-logo-horizontal-blue.png"
      alt="Hydro"
      class="h-12 w-auto sm:hidden"
    />

    <div class="flex flex-wrap items-center gap-1 ml-auto text-sm font-arial" *ngIf="context$ | async as ctx">
      <!-- Area selector -->
      <div class="relative" id="area-selector">
        <label for="area-select" class="sr-only">Área</label>
        <button
          type="button"
          id="area-select"
          (click)="toggleAreaDropdown()"
          class="min-w-[8rem] flex items-center justify-between gap-2 px-2 py-1.5 bg-white border border-aluminium rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-hydro-light-blue"
        >
          <span>{{ ctx.area || 'Selecione a área' }}</span>
          <svg
            class="w-4 h-4 transition-transform"
            [ngClass]="{ 'rotate-180': areaDropdownOpen }"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="m6 9 6 6 6-6" />
          </svg>
        </button>
        <ul
          *ngIf="areaDropdownOpen"
          class="absolute left-0 mt-1 w-full max-h-60 overflow-auto bg-white border border-aluminium rounded-lg shadow-lg z-20"
        >
          <li
            *ngFor="let area of areas"
            (click)="selectArea(area.name)"
            (keydown.enter)="selectArea(area.name)"
            tabindex="0"
            class="px-3 py-1.5 cursor-pointer transition-colors hover:bg-hydro-light-blue hover:text-white"
            [ngClass]="{ 'bg-hydro-blue text-white hover:bg-hydro-dark-blue': ctx.area === area.name }"
          >
            {{ area.name }}
          </li>
        </ul>
      </div>

      <!-- Date selector -->
      <label for="date" class="sr-only">Data</label>
      <input
        id="date"
        type="date"
        class="px-2 py-1.5 bg-white border border-aluminium rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-hydro-light-blue"
        [ngModel]="ctx.date"
        (ngModelChange)="onDateChange($event)"
      />

      <!-- Shift selector -->
      <div
        role="radiogroup"
        aria-label="Turno"
        class="flex border border-aluminium rounded-lg overflow-hidden divide-x divide-aluminium text-sm shadow-sm"
      >
        <label
          class="px-2 py-1 cursor-pointer flex-1 text-center transition-colors focus-within:ring-2 focus-within:ring-hydro-light-blue"
          [ngClass]="ctx.shift === 1 ? 'bg-hydro-blue text-white hover:bg-hydro-dark-blue' : 'hover:bg-light-gray'"
        >
          <input
            type="radio"
            name="shift"
            class="sr-only"
            [value]="1"
            [checked]="ctx.shift === 1"
            (change)="onShiftChange(1)"
            [disabled]="!ctx.date"
            [attr.title]="ctx.date ? undefined : 'Selecione uma data'"
          />
          Turno 1
        </label>
        <label
          class="px-2 py-1 cursor-pointer flex-1 text-center transition-colors focus-within:ring-2 focus-within:ring-hydro-light-blue"
          [ngClass]="ctx.shift === 2 ? 'bg-hydro-blue text-white hover:bg-hydro-dark-blue' : 'hover:bg-light-gray'"
        >
          <input
            type="radio"
            name="shift"
            class="sr-only"
            [value]="2"
            [checked]="ctx.shift === 2"
            (change)="onShiftChange(2)"
            [disabled]="!ctx.date"
            [attr.title]="ctx.date ? undefined : 'Selecione uma data'"
          />
          Turno 2
        </label>
        <label
          class="px-2 py-1 cursor-pointer flex-1 text-center transition-colors focus-within:ring-2 focus-within:ring-hydro-light-blue"
          [ngClass]="ctx.shift === 3 ? 'bg-hydro-blue text-white hover:bg-hydro-dark-blue' : 'hover:bg-light-gray'"
        >
          <input
            type="radio"
            name="shift"
            class="sr-only"
            [value]="3"
            [checked]="ctx.shift === 3"
            (change)="onShiftChange(3)"
            [disabled]="!ctx.date"
            [attr.title]="ctx.date ? undefined : 'Selecione uma data'"
          />
          Turno 3
        </label>
      </div>

      <!-- Export PDF -->
      <button
        type="button"
        (click)="exportPdf()"
        class="btn btn-primary p-1.5"
        aria-label="Exportar PDF"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-5 h-5"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"
          />
        </svg>
        <span class="sr-only">Exportar PDF</span>
      </button>

      <!-- User placeholder -->
      <div
        class="w-7 h-7 rounded-full bg-light-gray flex items-center justify-center text-hydro-blue"
        aria-label="Usuário"
      >
        <span class="text-sm">U</span>
      </div>
    </div>
  </div>
  </header>
